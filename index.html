<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Ramais - SEDES</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #1e5799 0%, #207cca 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .admin-login-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .admin-login-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .search-container {
            padding: 20px;
            background-color: #f0f4f8;
            border-bottom: 1px solid #e1e5eb;
        }
        
        #searchInput {
            width: 100%;
            padding: 12px 20px;
            border: 1px solid #d1d9e6;
            border-radius: 50px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }
        
        #searchInput:focus {
            border-color: #1e5799;
            box-shadow: 0 0 0 3px rgba(30, 87, 153, 0.2);
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background-color: white;
            border: 1px solid #d1d9e6;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .filter-btn:hover {
            background-color: #f0f4f8;
        }
        
        .filter-btn.active {
            background-color: #1e5799;
            color: white;
            border-color: #1e5799;
        }
        
        .content {
            padding: 20px;
        }
        
        .department {
            margin-bottom: 30px;
            border: 1px solid #e1e5eb;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .department-header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .department-header h2 {
            font-size: 1.3rem;
            margin: 0;
        }
        
        .toggle-icon {
            font-size: 1.2rem;
            transition: transform 0.3s;
        }
        
        .department-content {
            display: none;
            padding: 0;
        }
        
        .department-content.show {
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e5eb;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .ramal {
            font-weight: bold;
            color: #1e5799;
            width: 100px;
        }
        
        .edit-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .add-ramal-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #e1e5eb;
            margin-top: 30px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d9e6;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: #1e5799;
            color: white;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .debug-info {
            background: #f8f9fa;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 0.9rem;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .department-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .toggle-icon {
                margin-top: 10px;
            }
            
            th, td {
                padding: 8px 10px;
            }
            
            table {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Lista de Ramais - SEDES</h1>
            <p class="subtitle">Secretaria de Desenvolvimento Social</p>
            <button class="admin-login-btn" id="adminLoginBtn">Admin</button>
        </header>
        
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar por ramal, departamento ou setor...">
            <div class="filters">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="Gabinete">Gabinete</button>
                <button class="filter-btn" data-filter="Departamento">Departamentos</button>
                <button class="filter-btn" data-filter="Conselho">Conselhos</button>
                <button class="filter-btn" data-filter="Assessoria">Assessorias</button>
            </div>
        </div>
        
        <div class="content" id="content">
            <div class="debug-info" id="debugInfo">
                Carregando dados...
            </div>
        </div>
        
        <footer>
            <p>Atualizado em 2023 | Secretaria de Desenvolvimento Social</p>
        </footer>
    </div>

    <!-- Modal de Login -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2>Login Administrativo</h2>
            <div class="form-group">
                <label for="username">Usuário:</label>
                <input type="text" id="username" placeholder="Digite o usuário">
            </div>
            <div class="form-group">
                <label for="password">Senha:</label>
                <input type="password" id="password" placeholder="Digite a senha">
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="cancelLogin">Cancelar</button>
                <button class="btn btn-primary" id="confirmLogin">Entrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Edição/Adição -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h2 id="editModalTitle">Editar Ramal</h2>
            <div class="form-group">
                <label for="editRamal">Ramal:</label>
                <input type="text" id="editRamal" placeholder="Número do ramal">
            </div>
            <div class="form-group">
                <label for="editUnidade">Unidade:</label>
                <select id="editUnidade">
                    <option value="Gabinete">Gabinete</option>
                    <option value="Departamento">Departamento</option>
                    <option value="Conselho">Conselho</option>
                    <option value="Assessoria">Assessoria</option>
                </select>
            </div>
            <div class="form-group">
                <label for="editDepartamento">Departamento:</label>
                <input type="text" id="editDepartamento" placeholder="Nome do departamento">
            </div>
            <div class="form-group">
                <label for="editSetor">Setor/Divisão:</label>
                <input type="text" id="editSetor" placeholder="Nome do setor ou divisão">
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="cancelEdit">Cancelar</button>
                <button class="btn btn-primary" id="confirmEdit">Salvar</button>
            </div>
        </div>
    </div>

    <script>
        // Dados completos dos ramais - VERSÃO SIMPLIFICADA E CORRIGIDA
        let ramais = [
            {ramal: "6555", unidade: "Gabinete", departamento: "UEAPI - Unidade Especial de Atenção ao Idoso", setor: "Unidade Especial de Unidade Especial de Atenção ao Idoso"},
            {ramal: "6404", unidade: "Gabinete", departamento: "SECRETÁRIO ADJUNTO", setor: "Gabinete Secretário Adjunto"},
            {ramal: "6408", unidade: "Gabinete", departamento: "SECRETÁRIO ADJUNTO", setor: "Gabinete Secretário Adjunto"},
            {ramal: "6400", unidade: "Gabinete", departamento: "Recepção / Telefonista", setor: "Recepção SEDES"},
            {ramal: "6411", unidade: "Gabinete", departamento: "Gabinete Secretário", setor: "Apoio Gabinete Secretário"},
            {ramal: "6420", unidade: "Gabinete", departamento: "Gabinete Secretário", setor: "Apoio Gabinete Secretário"},
            {ramal: "6430", unidade: "Gabinete", departamento: "Gabinete Secretário", setor: "Apoio Gabinete Secretário"},
            {ramal: "6432", unidade: "Gabinete", departamento: "Gabinete Secretário", setor: "Apoio Gabinete Secretário"},
            {ramal: "6433", unidade: "Gabinete", departamento: "Gabinete Secretário", setor: "Apoio Gabinete Secretário"},
            {ramal: "6435", unidade: "Gabinete", departamento: "Gabinete Secretário", setor: "Chefia de Gabinete"},
            {ramal: "6402", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6403", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6405", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6406", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6407", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6409", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6426", unidade: "Departamento", departamento: "Departamento de Segurança Alimentar", setor: "Departamento de Segurança Alimentar"},
            {ramal: "6423", unidade: "Departamento", departamento: "Departamento de Politicas para Juventude", setor: "Departamento de Politicas para Juventude"},
            {ramal: "6475", unidade: "Departamento", departamento: "Departamento de Politicas para Juventude", setor: "Diretor de Departamento"},
            {ramal: "6487", unidade: "Departamento", departamento: "Departamento de Politicas para Juventude", setor: "Departamento de Politicas para Juventude"},
            {ramal: "6551", unidade: "Departamento", departamento: "Departamento de Politicas para Juventude", setor: "Departamento de Politicas para Juventude"},
            {ramal: "6552", unidade: "Departamento", departamento: "Departamento de Politicas para Juventude", setor: "Diretor Adjunto"},
            {ramal: "6553", unidade: "Departamento", departamento: "Departamento de Politicas para Juventude", setor: "Departamento de Politicas para Juventude"},
            {ramal: "6412", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimônio e Apoio Protocolo"},
            {ramal: "6413", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimônio e Apoio Protocolo"},
            {ramal: "6466", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimônio e Apoio Protocolo"},
            {ramal: "6491", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimônio e Apoio Protocolo"},
            {ramal: "6572", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimônio e Apoio Protocolo"},
            {ramal: "6414", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Planejamento de Programas"},
            {ramal: "6418", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Inclusão Socioprodutiva"},
            {ramal: "6428", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Inclusão Socioprodutiva"},
            {ramal: "6460", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Inclusão Socioprodutiva"},
            {ramal: "6500", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Registro"},
            {ramal: "6501", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Registro"},
            {ramal: "6502", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Registro"},
            {ramal: "6503", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Registro"},
            {ramal: "6441", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Coordenação do Pró-Social"},
            {ramal: "6442", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Coordenação do Pró-Social"},
            {ramal: "6454", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Coordenação do Pró-Social"},
            {ramal: "6471", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Coordenação do Pró-Social"},
            {ramal: "6529", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Divisão de Coordenação do Pró-Social"},
            {ramal: "6410", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Geral Departamento"},
            {ramal: "6465", unidade: "Departamento", departamento: "Departamento de Inclusão Socioprodutiva e Projetos Especiais", setor: "Diretor de Departamento"},
            {ramal: "6508", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Vigilância Socioassistencial"},
            {ramal: "6519", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Vigilância Socioassistencial"},
            {ramal: "6526", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Vigilância Socioassistencial"},
            {ramal: "6472", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Regulação do SUAS"},
            {ramal: "6476", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Regulação do SUAS"},
            {ramal: "6489", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do SUAS"},
            {ramal: "6518", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Gestão do Trabalho"},
            {ramal: "6457", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão de Benefícios"},
            {ramal: "6455", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do FEAS"},
            {ramal: "6470", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Diretoria do Departamento"},
            {ramal: "6550", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do FEAS"},
            {ramal: "6554", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do FEAS"},
            {ramal: "6438", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do FEAS"},
            {ramal: "6440", unidade: "Gabinete", departamento: "Direção Geral", setor: "Direção Geral"},
            {ramal: "6444", unidade: "Gabinete", departamento: "Direção Geral", setor: "Direção Geral"},
            {ramal: "6474", unidade: "Gabinete", departamento: "Direção Geral", setor: "Direção Geral"},
            {ramal: "6556", unidade: "Gabinete", departamento: "Direção Geral", setor: "Direção Geral"},
            {ramal: "6446", unidade: "Gabinete", departamento: "Direção Geral", setor: "Direção Geral"},
            {ramal: "6458", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Alta Complexidade"},
            {ramal: "6496", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Média Complexidade"},
            {ramal: "6512", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Alta Complexidade"},
            {ramal: "6513", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Especial"},
            {ramal: "6514", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Média Complexidade"},
            {ramal: "6515", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Especial"},
            {ramal: "6517", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Alta Complexidade"},
            {ramal: "6538", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Média Complexidade"},
            {ramal: "6549", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Especial - Alta Complexidade"},
            {ramal: "6456", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Básica do SUAS"},
            {ramal: "6537", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Básica do SUAS"},
            {ramal: "6539", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Básica do SUAS"},
            {ramal: "6547", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Básica do SUAS"},
            {ramal: "6548", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Básica do SUAS"},
            {ramal: "6557", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Proteção Social Básica do SUAS"},
            {ramal: "6452", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Diretoria do Departamento"},
            {ramal: "6540", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Diretoria do Departamento"},
            {ramal: "6453", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Diretoria do Departamento"},
            {ramal: "6490", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do SUAS"},
            {ramal: "6499", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do SUAS"},
            {ramal: "6506", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do SUAS"},
            {ramal: "6544", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão do SUAS"},
            {ramal: "6429", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Vigilância Socioassistencial"},
            {ramal: "6439", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6445", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6483", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6497", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6498", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6535", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6447", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "Divisão de Gestão Estadual do Cadastro Único e Programa Bolsa Família"},
            {ramal: "6419", unidade: "Departamento", departamento: "Departamento de Assistência Social", setor: "DAS - Divisão de Gestão Cadastro Único"},
            {ramal: "6462", unidade: "Departamento", departamento: "Departamento de Atenção a Primeira Infancia", setor: "Departamento de Atenção a Primeira Infancia"},
            {ramal: "6463", unidade: "Departamento", departamento: "Departamento de Atenção a Primeira Infancia", setor: "Departamento de Atenção a Primeira Infancia"},
            {ramal: "6481", unidade: "Departamento", departamento: "Departamento de Atenção a Primeira Infancia", setor: "Departamento de Atenção a Primeira Infancia"},
            {ramal: "6482", unidade: "Departamento", departamento: "Departamento de Atenção a Primeira Infancia", setor: "Departamento de Atenção a Primeira Infancia"},
            {ramal: "6484", unidade: "Departamento", departamento: "Departamento de Atenção a Primeira Infancia", setor: "Departamento de Atenção a Primeira Infancia"},
            {ramal: "6461", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Informática Geral"},
            {ramal: "6464", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimonio e Apoio"},
            {ramal: "6467", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimonio e Apoio"},
            {ramal: "6530", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimonio e Apoio"},
            {ramal: "6569", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimonio e Apoio"},
            {ramal: "6451", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Patrimonio e Apoio"},
            {ramal: "6401", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Orçamento e Finanças"},
            {ramal: "6425", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Orçamento e Finanças - Chefe"},
            {ramal: "6468", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Orçamento e Finanças"},
            {ramal: "6424", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas Nota Fiscal Gaucha"},
            {ramal: "6443", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6448", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6473", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6478", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6480", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6504", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas Ptc Convenios"},
            {ramal: "6545", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6575", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas - Chefe"},
            {ramal: "6434", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas"},
            {ramal: "6492", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "DA - Div. Contratos Convenios e Prest. Contas PTC Parcerias"},
            {ramal: "6437", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Gestão de Pessoas"},
            {ramal: "6494", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Gestão de Pessoas"},
            {ramal: "6436", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Divisão de Gestão de Pessoas"},
            {ramal: "6485", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Direção Administrativa"},
            {ramal: "6486", unidade: "Departamento", departamento: "Departamento Administrativo", setor: "Direção Administrativa"},
            {ramal: "8418", unidade: "Gabinete", departamento: "COPA Gabinete", setor: "Copa 8º Andar"},
            {ramal: "6449", unidade: "Conselho", departamento: "CEI", setor: "Conselho do Idoso"},
            {ramal: "6450", unidade: "Conselho", departamento: "CEI", setor: "Conselho do Idoso"},
            {ramal: "6560", unidade: "Conselho", departamento: "CEI", setor: "Conselho do Idoso"},
            {ramal: "6427", unidade: "Conselho", departamento: "CEAS", setor: "Conselho de Assistência Social"},
            {ramal: "6495", unidade: "Conselho", departamento: "CEAS", setor: "Conselho de Assistência Social"},
            {ramal: "6522", unidade: "Conselho", departamento: "CEAS", setor: "Conselho de Assistência Social"},
            {ramal: "6536", unidade: "Conselho", departamento: "CEAS", setor: "Conselho de Assistência Social"},
            {ramal: "6416", unidade: "Assessoria", departamento: "Assessoria Técnica", setor: "Assessoria Técnica"},
            {ramal: "6493", unidade: "Assessoria", departamento: "Assessoria Técnica", setor: "Assessoria Técnica"},
            {ramal: "6528", unidade: "Assessoria", departamento: "Assessoria Técnica", setor: "Assessoria Técnica"},
            {ramal: "6543", unidade: "Assessoria", departamento: "Assessoria Técnica", setor: "Assessoria Técnica"},
            {ramal: "6421", unidade: "Assessoria", departamento: "Serotial Procuradoria Jutidica SEDES", setor: "Setorial PGE"},
            {ramal: "6422", unidade: "Assessoria", departamento: "Serotial Procuradoria Jutidica SEDES", setor: "Setorial PGE"},
            {ramal: "6477", unidade: "Assessoria", departamento: "Serotial Procuradoria Jutidica SEDES", setor: "Setorial PGE"},
            {ramal: "6415", unidade: "Assessoria", departamento: "Assessoria de Comunicação Social", setor: "Assessoria de Comunicação Social"}
        ];

        // Credenciais de administrador
        const ADMIN_CREDENTIALS = {
            username: "admin",
            password: "sedes2023"
        };

        // Estado da aplicação
        let isAdmin = false;
        let currentEditIndex = -1;

        // Agrupar ramais por departamento - CORRIGIDO
        function groupByDepartment(ramais) {
            const grouped = {};
            ramais.forEach(ramal => {
                const dept = ramal.departamento;
                if (!grouped[dept]) {
                    grouped[dept] = [];
                }
                grouped[dept].push(ramal);
            });
            return grouped;
        }

        // Renderizar os dados na página - CORRIGIDO
        function renderRamais(filteredRamais = ramais) {
            const content = document.getElementById('content');
            const debugInfo = document.getElementById('debugInfo');
            
            // Debug info
            debugInfo.innerHTML = `Total de ramais carregados: ${ramais.length} | Exibindo: ${filteredRamais.length}`;
            
            content.innerHTML = '';
            content.appendChild(debugInfo);
            
            if (filteredRamais.length === 0) {
                content.innerHTML += '<p>Nenhum ramal encontrado.</p>';
                return;
            }
            
            const grouped = groupByDepartment(filteredRamais);
            const departments = Object.keys(grouped).sort();
            
            departments.forEach(departamento => {
                const ramaisDoDepartamento = grouped[departamento];
                const unidade = ramaisDoDepartamento[0].unidade;
                
                const departmentDiv = document.createElement('div');
                departmentDiv.className = 'department';
                departmentDiv.setAttribute('data-unidade', unidade);
                
                const departmentHeader = document.createElement('div');
                departmentHeader.className = 'department-header';
                departmentHeader.innerHTML = `
                    <h2>${departamento}</h2>
                    <span class="toggle-icon">▼</span>
                `;
                
                const departmentContent = document.createElement('div');
                departmentContent.className = 'department-content show';
                
                let tableHTML = `
                    <table>
                        <thead>
                            <tr>
                                <th>Ramal</th>
                                <th>Setor</th>
                                ${isAdmin ? '<th>Ações</th>' : ''}
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                ramaisDoDepartamento.forEach((ramal) => {
                    const originalIndex = ramais.findIndex(r => 
                        r.ramal === ramal.ramal && 
                        r.departamento === ramal.departamento && 
                        r.setor === ramal.setor
                    );
                    
                    tableHTML += `
                        <tr>
                            <td class="ramal">${ramal.ramal}</td>
                            <td>${ramal.setor}</td>
                            ${isAdmin ? `
                                <td>
                                    <button class="edit-btn" data-index="${originalIndex}">Editar</button>
                                    <button class="delete-btn" data-index="${originalIndex}">Excluir</button>
                                </td>
                            ` : ''}
                        </tr>
                    `;
                });
                
                tableHTML += `
                        </tbody>
                    </table>
                `;
                
                departmentContent.innerHTML = tableHTML;
                
                departmentDiv.appendChild(departmentHeader);
                departmentDiv.appendChild(departmentContent);
                content.appendChild(departmentDiv);
                
                // Adicionar evento de clique para expandir/recolher
                departmentHeader.addEventListener('click', () => {
                    departmentContent.classList.toggle('show');
                    const icon = departmentHeader.querySelector('.toggle-icon');
                    icon.textContent = departmentContent.classList.contains('show') ? '▲' : '▼';
                });
            });
            
            // Adicionar botão de adicionar se for admin
            if (isAdmin) {
                const addButton = document.createElement('button');
                addButton.className = 'add-ramal-btn';
                addButton.textContent = '+ Adicionar Novo Ramal';
                addButton.addEventListener('click', () => {
                    openEditModal();
                });
                content.insertBefore(addButton, content.firstChild);
            }
            
            // Adicionar eventos aos botões de edição e exclusão
            if (isAdmin) {
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const index = parseInt(e.target.getAttribute('data-index'));
                        openEditModal(index);
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const index = parseInt(e.target.getAttribute('data-index'));
                        if (confirm('Tem certeza que deseja excluir este ramal?')) {
                            ramais.splice(index, 1);
                            saveRamais();
                            renderRamais();
                        }
                    });
                });
            }
        }

        // Salvar ramais no localStorage
        function saveRamais() {
            localStorage.setItem('ramais_sedes', JSON.stringify(ramais));
        }

        // Filtrar ramais por unidade
        function filterByUnidade(unidade) {
            if (unidade === 'all') {
                return ramais;
            }
            return ramais.filter(ramal => ramal.unidade === unidade);
        }

        // Filtrar ramais por busca
        function filterBySearch(term) {
            if (!term) {
                return ramais;
            }
            const lowerTerm = term.toLowerCase();
            return ramais.filter(ramal => 
                ramal.ramal.toLowerCase().includes(lowerTerm) ||
                ramal.departamento.toLowerCase().includes(lowerTerm) ||
                ramal.setor.toLowerCase().includes(lowerTerm)
            );
        }

        // Abrir modal de edição
        function openEditModal(index = -1) {
            currentEditIndex = index;
            const modal = document.getElementById('editModal');
            const title = document.getElementById('editModalTitle');
            
            if (index === -1) {
                // Modo adição
                title.textContent = 'Adicionar Novo Ramal';
                document.getElementById('editRamal').value = '';
                document.getElementById('editUnidade').value = 'Gabinete';
                document.getElementById('editDepartamento').value = '';
                document.getElementById('editSetor').value = '';
            } else {
                // Modo edição
                title.textContent = 'Editar Ramal';
                const ramal = ramais[index];
                document.getElementById('editRamal').value = ramal.ramal;
                document.getElementById('editUnidade').value = ramal.unidade;
                document.getElementById('editDepartamento').value = ramal.departamento;
                document.getElementById('editSetor').value = ramal.setor;
            }
            
            modal.style.display = 'flex';
        }

        // Fechar modal de edição
        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Salvar edição
        function saveEdit() {
            const ramal = document.getElementById('editRamal').value;
            const unidade = document.getElementById('editUnidade').value;
            const departamento = document.getElementById('editDepartamento').value;
            const setor = document.getElementById('editSetor').value;
            
            if (!ramal || !unidade || !departamento || !setor) {
                alert('Por favor, preencha todos os campos.');
                return;
            }
            
            const ramalData = { ramal, unidade, departamento, setor };
            
            if (currentEditIndex === -1) {
                // Adicionar novo
                ramais.push(ramalData);
            } else {
                // Editar existente
                ramais[currentEditIndex] = ramalData;
            }
            
            saveRamais();
            renderRamais();
            closeEditModal();
        }

        // Inicializar a página
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Total de ramais carregados:', ramais.length);
            renderRamais();
            
            // Configurar busca
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', () => {
                const filteredBySearch = filterBySearch(searchInput.value);
                renderRamais(filteredBySearch);
            });
            
            // Configurar filtros por unidade
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const filter = button.getAttribute('data-filter');
                    const filteredRamais = filterByUnidade(filter);
                    renderRamais(filteredRamais);
                });
            });
            
            // Configurar modal de login
            const loginModal = document.getElementById('loginModal');
            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const cancelLogin = document.getElementById('cancelLogin');
            const confirmLogin = document.getElementById('confirmLogin');
            
            adminLoginBtn.addEventListener('click', () => {
                if (isAdmin) {
                    // Logout
                    isAdmin = false;
                    adminLoginBtn.textContent = 'Admin';
                    renderRamais();
                } else {
                    // Login
                    loginModal.style.display = 'flex';
                }
            });
            
            cancelLogin.addEventListener('click', () => {
                loginModal.style.display = 'none';
            });
            
            confirmLogin.addEventListener('click', () => {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                    isAdmin = true;
                    adminLoginBtn.textContent = 'Sair';
                    loginModal.style.display = 'none';
                    renderRamais();
                } else {
                    alert('Credenciais inválidas!');
                }
            });
            
            // Configurar modal de edição
            const editModal = document.getElementById('editModal');
            const cancelEdit = document.getElementById('cancelEdit');
            const confirmEdit = document.getElementById('confirmEdit');
            
            cancelEdit.addEventListener('click', closeEditModal);
            confirmEdit.addEventListener('click', saveEdit);
            
            // Fechar modais ao clicar fora
            window.addEventListener('click', (e) => {
                if (e.target === loginModal) {
                    loginModal.style.display = 'none';
                }
                if (e.target === editModal) {
                    closeEditModal();
                }
            });
        });
    </script>
</body>
</html>
